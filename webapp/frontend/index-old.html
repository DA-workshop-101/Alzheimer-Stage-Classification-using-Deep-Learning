<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Alzheimer's Prediction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
        }

        img {
            max-width: 300px;
            display: block;
            margin-top: 1rem;
        }
    </style>
</head>

<body>

    <h2>Upload Brain Scan</h2>
    <input type="file" id="imageInput">
    <button onclick="sendImage()">Predict</button>

    <h3>Prediction:</h3>
    <p id="result"></p>

    <h3>Grad-CAM Visualization:</h3>
    <img id="gradcamImage" src="">

    <script>
        async function sendImage() {
            const input = document.getElementById('imageInput');
            if (!input.files.length) {
                alert('Please select an image.');
                return;
            }

            const formData = new FormData();
            formData.append('file', input.files[0]);

            const response = await fetch('http://localhost:8000/predict', {
                method: 'POST',
                body: formData
            });

            if (!response.ok) {
                alert('Prediction failed!');
                return;
            }

            const data = await response.json();
            document.getElementById('result').innerText =
                `Class: ${data.predicted_class}(${data.class_code}) | Confidence: ${data.confidence}%`;
            document.getElementById('gradcamImage').src = `data:image/png;base64,${data.gradcam}`;
        }
    </script>

</body>

</html>